<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Fighters | Elite Content Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif;
            background: #050505;
            color: #FBBF24;
            overflow-x: hidden;
        }
        
        /* Reduced Hero Text with Gold-Black Gradient */
        .hero-font { 
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            letter-spacing: -1px;
            background: linear-gradient(to bottom, #FBBF24 20%, #78350f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
        }

        /* Scanline Overlay Effect */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 50;
        }

        /* Floating Geometric Particles */
        .particle {
            position: fixed;
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.2);
            z-index: -1;
            animation: float-around var(--duration) infinite linear;
        }

        @keyframes float-around {
            from { transform: translate(var(--x1), var(--y1)) rotate(0deg); }
            to { transform: translate(var(--x2), var(--y2)) rotate(360deg); }
        }

        .content-card { 
            background: rgba(15, 15, 15, 0.8);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(251, 191, 36, 0.1);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .search-input:focus {
            border-color: #FBBF24;
            background: rgba(251, 191, 36, 0.05);
        }
        
        .spinner { border-top-color: #FBBF24; animation: spin 0.8s cubic-bezier(0.4, 0, 0.2, 1) infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Smooth reveal for reports */
        .report-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }
    </style>
</head>
<body class="min-h-screen relative">
    <div class="scanlines"></div>
    <div class="fixed inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10 pointer-events-none"></div>
    
    <div class="particle w-12 h-12" style="--duration: 25s; --x1: 10vw; --y1: 10vh; --x2: 80vw; --y2: 70vh;"></div>
    <div class="particle w-24 h-24 rounded-full" style="--duration: 40s; --x1: 90vw; --y1: 80vh; --x2: 20vw; --y2: 10vh;"></div>
    <div class="particle w-16 h-16" style="--duration: 30s; --x1: 50vw; --y1: -10vh; --x2: 50vw; --y2: 110vh;"></div>

    <div class="max-w-5xl mx-auto px-6 py-20 relative z-10">
        
        <header class="text-center mb-16">
            <h1 class="hero-font text-5xl md:text-7xl mb-4 tracking-tighter">Real Fighters</h1>
            <div class="flex items-center justify-center gap-4">
                <span class="h-[1px] w-12 bg-yellow-500/30"></span>
                <p class="text-yellow-500/50 text-[10px] font-bold tracking-[0.4em] uppercase">Intelligence Protocol v2.0</p>
                <span class="h-[1px] w-12 bg-yellow-500/30"></span>
            </div>
        </header>

        <div class="max-w-2xl mx-auto mb-12">
            <div class="content-card p-1 rounded-full flex items-center pr-1 transition-all focus-within:ring-1 ring-yellow-500/50">
                <input id="query" type="text" placeholder="ENTER MOVIE TITLE..." 
                       class="bg-transparent w-full px-8 py-4 text-yellow-400 font-medium placeholder-yellow-400/20 outline-none uppercase text-xs tracking-widest">
                <button onclick="searchMovies()" class="bg-yellow-500 hover:bg-yellow-400 text-black font-black py-4 px-10 rounded-full transition-all text-[10px] tracking-[0.2em]">
                    EXECUTE
                </button>
            </div>
        </div>

        <div class="flex justify-center gap-8 mb-16">
            <label class="cursor-pointer group">
                <input type="radio" name="category" value="violence" checked class="hidden peer">
                <div class="text-[10px] font-black tracking-[0.3em] uppercase opacity-30 peer-checked:opacity-100 peer-checked:text-yellow-500 transition-all border-b border-transparent peer-checked:border-yellow-500 pb-2">
                    Violence
                </div>
            </label>
            <label class="cursor-pointer group">
                <input type="radio" name="category" value="nudity" class="hidden peer">
                <div class="text-[10px] font-black tracking-[0.3em] uppercase opacity-30 peer-checked:opacity-100 peer-checked:text-yellow-500 transition-all border-b border-transparent peer-checked:border-yellow-500 pb-2">
                    Sexual Content
                </div>
            </label>
        </div>

        <div id="results" class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-10"></div>

        <div id="loading" class="hidden flex flex-col items-center py-20">
            <div class="w-8 h-8 border border-yellow-400/20 border-t-yellow-400 rounded-full spinner mb-4"></div>
            <p class="text-yellow-400/40 font-bold tracking-[0.5em] text-[8px] uppercase">Retrieving Metadata</p>
        </div>

        <div id="report" class="hidden max-w-4xl mx-auto">
            <div class="content-card rounded-sm overflow-hidden border-t-4 border-t-yellow-500">
                <div class="p-8 md:p-12">
                    <div class="flex flex-col md:flex-row justify-between items-start border-b border-white/5 pb-8 mb-8 gap-6">
                        <div>
                            <p class="text-yellow-500/50 text-[10px] font-black uppercase tracking-[0.4em] mb-2">Subject Analysis</p>
                            <h2 id="movieTitle" class="text-4xl md:text-5xl font-black text-white uppercase tracking-tighter"></h2>
                        </div>
                        <div id="severityBadge" class="px-6 py-2 border border-white/10 text-[10px] font-black uppercase tracking-widest"></div>
                    </div>
                    <div class="space-y-3" id="detailsList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        async function searchMovies() {
            const query = document.getElementById('query').value.trim();
            if(!query) return;
            const resultsDiv = document.getElementById('results');
            document.getElementById('report').classList.add('hidden');
            resultsDiv.innerHTML = `<div class="col-span-full text-center py-10 text-[10px] tracking-[0.5em] opacity-30">SCANNING...</div>`;
            try {
                const res = await fetch('/search', {
                    method: 'POST', 
                    headers: {'Content-Type': 'application/json'}, 
                    body: JSON.stringify({query})
                });
                const data = await res.json();
                resultsDiv.innerHTML = data.slice(0, 6).map((m) => `
                    <div onclick="analyze('${m.id}', '${m.display.replace(/'/g, "\\'")}')" 
                         class="content-card p-4 cursor-pointer group hover:bg-yellow-500 transition-all duration-300">
                        <h3 class="text-yellow-400 font-bold text-[10px] uppercase tracking-wider group-hover:text-black transition-colors">${m.display}</h3>
                    </div>
                `).join('');
            } catch (e) {
                resultsDiv.innerHTML = `<div class="col-span-full text-red-500 text-[10px] text-center uppercase">Signal Lost</div>`;
            }
        }

        async function analyze(id, title) {
            const category = document.querySelector('input[name="category"]:checked').value;
            const loading = document.getElementById('loading');
            const report = document.getElementById('report');
            const results = document.getElementById('results');
            results.classList.add('hidden');
            loading.classList.remove('hidden');
            report.classList.add('hidden');
            try {
                const res = await fetch('/analyze', {
                    method: 'POST', 
                    headers: {'Content-Type': 'application/json'}, 
                    body: JSON.stringify({id, category})
                });
                const data = await res.json();
                loading.classList.add('hidden');
                report.classList.remove('hidden');
                document.getElementById('movieTitle').innerText = title;
                const sev = data.severity.toLowerCase();
                const badge = document.getElementById('severityBadge');
                
                let color = '#71717a'; 
                if(sev === 'severe') color = '#ef4444';
                else if(sev === 'moderate') color = '#f59e0b';
                else if(sev === 'mild') color = '#3b82f6';

                badge.style.color = color;
                badge.style.borderColor = color + '44';
                badge.innerText = `Severity: ${sev}`;
                
                document.getElementById('detailsList').innerHTML = data.details.map((d) => `
                    <div class="p-5 bg-white/5 border-l border-yellow-500/20 text-gray-400 text-xs leading-relaxed font-light">
                        ${d}
                    </div>
                `).join('');
                window.scrollTo({ top: report.offsetTop - 50, behavior: 'smooth' });
            } catch (e) {
                loading.classList.add('hidden');
                results.classList.remove('hidden');
                alert("Buffer Error.");
            }
        }
    </script>
</body>
</html>
